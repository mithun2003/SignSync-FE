<!-- common-button.component.html - Updated for Tailwind v4 -->

<button
  [class]="completeButtonClass"
  [disabled]="isLoading() || disabled()"
  [type]="isSubmitButton() ? 'submit' : 'button'"
  [ngClass]="disabled() ? disabledButtonClass() : ''"
  [matTooltip]="toolTipMsg() ?? ''"
  (click)="buttonClick($event)">

  <!-- Hover Effect (Expanding Circle) -->
  @if (hover() && !disabled() && !isLoading()) {
    <!-- <span class="hover-effect"></span> -->

    <span [class]="hoverEffectClass"></span>
  }

  <!-- Button Content -->
  <span class="relative z-10 inline-flex items-center gap-2 {{ textClass() }}">
    
    <!-- Prefix Icon (Before Text) -->
    @if (prefix() && isIcon() && icon()) {
      @if (showBadge()) {
        <span
          [matBadge]="badgeValue()"
          [matBadgeColor]="badgeColor()"
          [matBadgeSize]="badgeSize()">
          <fa-icon
            [size]="iconSize()"
            [icon]="icon()!"
            [class]="iconClass()">
          </fa-icon>
        </span>
      } @else {
        <fa-icon
          [size]="iconSize()"
          [icon]="icon()!"
          [class]="iconClass()">
        </fa-icon>
      }
    }

    <!-- Button Text -->
    @if (text()) {
      <span class="text-nowrap">
        {{ text() }}
      </span>
    }

    <!-- Suffix Icon (After Text) or Loading -->
    @if (!isLoading() && !prefix() && isIcon() && icon()) {
      
      <!-- Animated Arrow Icon -->
      @if (animation() === 'animation-arrow-icon') {
        @if (showBadge()) {
          <span
            [matBadge]="badgeValue()"
            [matBadgeColor]="badgeColor()"
            [matBadgeSize]="badgeSize()">
            <fa-icon
              [size]="iconSize()"
              [icon]="icon() ?? faArrowRight"
              [class]="iconClass()"
              class="transition-all duration-400 -ms-7 opacity-0 group-hover:ms-0 group-hover:opacity-100">
            </fa-icon>
          </span>
        } @else {
          <fa-icon
            [size]="iconSize()"
            [icon]="icon() ?? faArrowRight"
            [class]="iconClass()"
            class="transition-all duration-400 -ms-7 opacity-0 group-hover:ms-0 group-hover:opacity-100">
          </fa-icon>
        }
      } 
      
      <!-- Regular Icon -->
      @else {
        @if (showBadge()) {
          <span
            [matBadge]="badgeValue()"
            [matBadgeColor]="badgeColor()"
            [matBadgeSize]="badgeSize()">
            <fa-icon
              [size]="iconSize()"
              [icon]="icon()!"
              [class]="iconClass()">
            </fa-icon>
          </span>
        } @else {
          <fa-icon
            [size]="iconSize()"
            [icon]="icon()!"
            [class]="iconClass()">
          </fa-icon>
        }
      }
    }

    <!-- Loading Spinner -->
    @if (isLoading()) {
      <fa-icon
        [size]="iconSize()"
        [icon]="faSpinner"
        class="animate-spin text-{{ loaderSize() }} text-{{ loaderColor() }}">
      </fa-icon>
    }
  </span>
</button>